<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Numerology Analysis portal | Discover Your Numbers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #111827; /* Dark background */
            background: linear-gradient(135deg, #1F2937, #111827);
        }
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
        /* Custom animation for results appearing */
        .result-card {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Style for the number itself */
        .number-display {
            background: -webkit-linear-gradient(45deg, #A855F7, #EC4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        /* Custom scrollbar for a better look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1F2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4B5563;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6B7280;
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-10">
            <h1 class="font-serif text-4xl md:text-6xl font-bold text-white">Numerology Analysis Portal</h1>
            <p class="text-lg text-purple-300 mt-2">Unlock the secrets hidden in your name and birth date.</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-5 gap-8">

            <div class="lg:col-span-2 bg-gray-800/50 p-6 md:p-8 rounded-2xl shadow-2xl border border-gray-700 backdrop-blur-sm self-start">
                <h2 class="font-serif text-3xl font-bold text-white mb-6">Enter Your Details</h2>
                <form id="numerology-form" class="space-y-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="firstName" class="block text-sm font-medium text-purple-300 mb-2">First Name</label>
                            <input type="text" id="firstName" name="firstName" style="text-transform:uppercase" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:ring-purple-500 focus:border-purple-500 transition" placeholder="e.g., JOHN" required>
                        </div>
                        <div>
                            <label for="gender" class="block text-sm font-medium text-purple-300 mb-2">Gender</label>
                            <select id="gender" name="gender" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-purple-500 focus:border-purple-500 transition" required>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="middleName" class="block text-sm font-medium text-purple-300 mb-2">Middle Name (Optional)</label>
                        <input type="text" id="middleName" name="middleName" style="text-transform:uppercase" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:ring-purple-500 focus:border-purple-500 transition" placeholder="e.g., MICHAEL">
                    </div>
                    <div>
                        <label for="lastName" class="block text-sm font-medium text-purple-300 mb-2">Last Name</label>
                        <input type="text" id="lastName" name="lastName" style="text-transform:uppercase" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:ring-purple-500 focus:border-purple-500 transition" placeholder="e.g., DOE" required>
                    </div>
                    <div>
                        <label for="dob" class="block text-sm font-medium text-purple-300 mb-2">Date of Birth</label>
                        <input type="date" id="dob" name="dob" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-purple-500 focus:border-purple-500 transition" required>
<div>
                        <label for="tob" class="block text-sm font-medium text-purple-300 mb-2">Time of Birth</label>
                        <input type="time" id="tob" name="tob" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-purple-500 focus:border-purple-500 transition" required>         
           </div>
 <label for="pob" class="block text-sm font-medium text-purple-300 mb-2">Place of Birth</label>
                        <input type="text" id="pob" name="pob" class="w-full bg-gray-900 border border-gray-600 rounded-lg px-4 py-3 text-white focus:ring-purple-500 focus:border-purple-500 transition" required>         
           </div>                 
   <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105 shadow-lg focus:outline-none focus:ring-4 focus:ring-purple-500/50">
                        Reveal My Numbers
                    </button>
                </form>
            </div>

            <div id="results-container" class="lg:col-span-3">
                <div id="results-placeholder" class="h-full flex flex-col items-center justify-center bg-gray-800/30 p-8 rounded-2xl border-2 border-dashed border-gray-700 text-center">
                    <svg class="w-16 h-16 text-gray-600 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                    </svg>
                    <h3 class="font-serif text-2xl text-white">Your personal report awaits.</h3>
                    <p class="text-gray-400 mt-2">Fill in your details to generate your numerology chart.</p>
                </div>
                <div id="results-content" class="hidden space-y-6">
                    </div>
                 <div id="loading-spinner" class="hidden h-full flex items-center justify-center">
                    <div class="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-purple-500"></div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // --- DOM Elements ---
        const form = document.getElementById('numerology-form');
        const resultsContainer = document.getElementById('results-container');
        const resultsPlaceholder = document.getElementById('results-placeholder');
        const resultsContent = document.getElementById('results-content');
        const loadingSpinner = document.getElementById('loading-spinner');

        // --- DATA ---
        const friendNumbers = {
            1: [1, 2, 3, 5, 6, 9], 2: [1, 2, 3, 5], 3: [1, 2, 3, 5, 7],
            4: [1, 5, 7, 6, 4, 8], 5: [1, 2, 3, 5, 6], 6: [1, 4, 5, 6, 7],
            7: [1, 3, 5, 4, 6], 8: [5, 3, 6, 7, 4, 8], 9: [1, 3, 5]
        };

        const interpretations = {
            zodiac: {
                "Aries": { title: "The Ram", text: "Energetic, courageous, and confident. Aries is a natural leader who loves a challenge and brings enthusiasm to everything they do." },
                "Taurus": { title: "The Bull", text: "Reliable, patient, and practical. Taurus enjoys comfort and security, and is known for their strong will and loyalty." },
                "Gemini": { title: "The Twins", text: "Adaptable, curious, and expressive. Gemini is a social butterfly with a quick wit and a love for communication and learning." },
                "Cancer": { title: "The Crab", text: "Intuitive, nurturing, and compassionate. Cancer is deeply connected to home and family, and is known for their emotional depth." },
                "Leo": { title: "The Lion", text: "Dramatic, creative, and confident. Leo is a natural performer who loves to be in the spotlight and inspires others with their warmth." },
                "Virgo": { title: "The Maiden", text: "Practical, analytical, and hardworking. Virgo has a keen eye for detail and a deep-seated desire to be of service to others." },
                "Libra": { title: "The Scales", text: "Cooperative, diplomatic, and gracious. Libra seeks harmony and balance in all things and thrives in peaceful partnerships." },
                "Scorpio": { title: "The Scorpion", text: "Resourceful, brave, and passionate. Scorpio is a true friend with a mysterious nature and a powerful emotional intensity." },
                "Sagittarius": { title: "The Archer", text: "Generous, idealistic, and has a great sense of humor. Sagittarius loves freedom, travel, and exploring life's philosophies." },
                "Capricorn": { title: "The Goat", text: "Responsible, disciplined, and self-controlled. Capricorn is a master of planning and achieves goals through persistence and hard work." },
                "Aquarius": { title: "The Water Bearer", text: "Progressive, original, and independent. Aquarius is a humanitarian at heart who wants to make the world a better place." },
                "Pisces": { title: "The Fish", text: "Compassionate, artistic, and intuitive. Pisces is a gentle soul who is deeply empathetic and connected to their imagination." },
            }
        };

        // --- Event Listener ---
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            const firstName = document.getElementById('firstName').value.trim().toUpperCase();
            const middleName = document.getElementById('middleName').value.trim().toUpperCase();
            const lastName = document.getElementById('lastName').value.trim().toUpperCase();
            const dob = document.getElementById('dob').value;
            const gender = document.getElementById('gender').value;

            if (!firstName || !lastName || !dob || !gender) {
                console.error('Please fill in all required fields.');
                return;
            }
            
            resultsPlaceholder.classList.add('hidden');
            resultsContent.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');

            const numerologyReport = calculateNumerology(firstName, middleName, lastName, dob, gender);
            
            loadingSpinner.classList.add('hidden');
            resultsContent.classList.remove('hidden');
            resultsContent.innerHTML = ''; // Clear previous results
            displayResults(numerologyReport);
        });
        
        // --- Calculation Logic ---
        function reduceToSingleDigit(num) {
            if (num === 11 || num === 22) return num;
            let sum = String(num).split('').reduce((acc, digit) => acc + Number(digit), 0);
            return (sum > 9 && sum !== 11 && sum !== 22) ? reduceToSingleDigit(sum) : sum;
        }
        
        function forceSingleDigit(num) {
            let sum = String(num).split('').reduce((acc, digit) => acc + Number(digit), 0);
            return sum > 9 ? forceSingleDigit(sum) : sum;
        }

        function getZodiacSign(day, month) {
            if ((month == 1 && day >= 20) || (month == 2 && day <= 18)) return "Aquarius";
            if ((month == 2 && day >= 19) || (month == 3 && day <= 20)) return "Pisces";
            if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) return "Aries";
            if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) return "Taurus";
            if ((month == 5 && day >= 21) || (month == 6 && day <= 20)) return "Gemini";
            if ((month == 6 && day >= 21) || (month == 7 && day <= 22)) return "Cancer";
            if ((month == 7 && day >= 23) || (month == 8 && day <= 22)) return "Leo";
            if ((month == 8 && day >= 23) || (month == 9 && day <= 22)) return "Virgo";
            if ((month == 9 && day >= 23) || (month == 10 && day <= 22)) return "Libra";
            if ((month == 10 && day >= 23) || (month == 11 && day <= 21)) return "Scorpio";
            if ((month == 11 && day >= 22) || (month == 12 && day <= 21)) return "Sagittarius";
            if ((month == 12 && day >= 22) || (month == 1 && day <= 19)) return "Capricorn";
            return "Unknown";
        }
        
        function calculateNumerology(firstName, middleName, lastName, dobString, gender) {
            const date = new Date(dobString);
            const day = date.getUTCDate();
            const month = date.getUTCMonth() + 1;
            const year = date.getUTCFullYear();
            const fullName = [firstName, middleName, lastName].filter(Boolean).join('');

            const driverNumber = forceSingleDigit(day);
            const conductorDigitSum = (String(day) + String(month) + String(year)).split('').reduce((s, d) => s + Number(d), 0);
            const conductorNumber = forceSingleDigit(conductorDigitSum);

            const driverLuckyNumbers = friendNumbers[driverNumber] ? friendNumbers[driverNumber].join(', ') : 'N/A';
            const conductorLuckyNumbers = friendNumbers[conductorNumber] ? friendNumbers[conductorNumber].join(', ') : 'N/A';
            
            const letterValues = { 'A': 1, 'B': 2, 'C': 3, 'D': 4, 'E': 5, 'F': 8, 'G': 3, 'H': 5, 'I': 1, 'J': 1, 'K': 2, 'L': 3, 'M': 4, 'N': 5, 'O': 7, 'P': 8, 'Q': 1, 'R': 2, 'S': 3, 'T': 4, 'U': 6, 'V': 6, 'W': 6, 'X': 5, 'Y': 1, 'Z': 7 };
            const vowels = ['A', 'E', 'I', 'O', 'U'];
            let soulUrgeSum = 0;
            let personalitySum = 0;
            fullName.split('').forEach(char => {
                if (letterValues[char]) {
                    if (vowels.includes(char)) soulUrgeSum += letterValues[char];
                    else personalitySum += letterValues[char];
                }
            });
            const soulUrgeNumber = forceSingleDigit(soulUrgeSum);
            const personalityNumber = reduceToSingleDigit(personalitySum);
            const fullNameNumber = reduceToSingleDigit(soulUrgeSum + personalitySum);
            
            const currentYear = new Date().getFullYear();
            const personalYear = forceSingleDigit(forceSingleDigit(day) + forceSingleDigit(month) + forceSingleDigit(currentYear));
            const universalYear = forceSingleDigit(currentYear);
            const successNumber = forceSingleDigit(day + month);

            const karmicDebt = [13, 14, 16, 19].includes(day) || [13, 14, 16, 19].includes(conductorDigitSum) ? "Yes" : "No";
            const masterNumber = [11, 22].includes(day) || [11, 22, 33].includes(conductorDigitSum) ? "Yes" : "No";

            const zodiacSign = getZodiacSign(day, month);
            let yearSum = forceSingleDigit(year);
            let kuaNumber = (gender === 'male') ? 11 - yearSum : 4 + yearSum;
            kuaNumber = forceSingleDigit(kuaNumber);
            if (kuaNumber === 5) kuaNumber = (gender === 'male') ? 2 : 8;
            
            const baseGridCounts = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0};
            `${day}${month}${year}`.split('').forEach(d => { if(baseGridCounts[d] !== undefined) baseGridCounts[d]++; });
            
            const fullGridCounts = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0};
            let fullGridSourceString = `${month}${year}`;
            
            const excludedDays = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 30];
            if (!excludedDays.includes(day)) {
                fullGridSourceString += `${day}`;
            }
            
            fullGridSourceString += `${driverNumber}${conductorNumber}${kuaNumber}${fullNameNumber}`;
            fullGridSourceString.split('').forEach(d => { if(fullGridCounts[d] !== undefined) fullGridCounts[d]++; });

            return { driverNumber, conductorNumber, driverLuckyNumbers, conductorLuckyNumbers, soulUrgeNumber, personalityNumber, personalYear, successNumber, universalYear, karmicDebt, masterNumber, zodiacSign, kuaNumber, fullNameNumber, baseGridCounts, fullGridCounts };
        }

        // --- Display Logic ---
        function createResultCard(title, number, interpretation, delay, footerText = '') {
            const interp = interpretation || { title: "Cosmic Insight", text: "This value represents a key aspect of your life's blueprint, influencing your personality, challenges, and opportunities." };
            const isText = isNaN(parseFloat(number));
            const numberDisplayClass = isText ? 'text-4xl md:text-5xl' : 'text-6xl';
            const footerHTML = footerText ? `<div class="mt-4 pt-3 border-t border-gray-700 text-sm text-purple-200/80"><strong class="text-purple-300">Friend Numbers:</strong> ${footerText}</div>` : '';

            return `
                <div class="result-card bg-gray-800/50 p-6 rounded-xl border border-gray-700 shadow-lg" style="animation-delay: ${delay}ms;">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-300">${title}</p>
                            <h3 class="font-serif text-2xl text-white mt-1">${interp.title}</h3>
                        </div>
                        <div class="number-display ${numberDisplayClass} font-bold">${number}</div>
                    </div>
                    <p class="text-gray-400 mt-4">${interp.text}</p>
                    ${footerHTML}
                </div>`;
        }
        
        function createLoShuGrid(title, counts, delay, explanationText = '') {
            const gridLayout = [[4, 9, 2], [3, 5, 7], [8, 1, 6]];
            let tableRows = '';
            gridLayout.forEach(row => {
                let tableCells = '';
                row.forEach(num => {
                    const count = counts[num] || 0;
                    const displayVal = count > 0 ? String(num).repeat(count) : '&nbsp;';
                    tableCells += `<td class="border border-gray-600 h-16 w-16 text-center text-xl font-bold align-middle p-1">${displayVal}</td>`;
                });
                tableRows += `<tr>${tableCells}</tr>`;
            });

            const explanationHTML = explanationText ? `<p class="text-center text-sm text-gray-400 mb-4">${explanationText}</p>` : '';

            return `
                <div class="result-card bg-gray-800/50 p-6 rounded-xl border border-gray-700 shadow-lg" style="animation-delay: ${delay}ms;">
                    <h3 class="font-serif text-2xl text-white mb-2 text-center">${title}</h3>
                    ${explanationHTML}
                    <table class="w-full border-collapse bg-gray-900/50"><tbody>${tableRows}</tbody></table>
                </div>`;
        }

        function displayResults(report) {
            const explanation = `Includes Moolank (${report.driverNumber}), Bhagyank (${report.conductorNumber}), Kua No. (${report.kuaNumber}), & Name No. (${report.fullNameNumber}).`;
            resultsContent.innerHTML = `
                ${createResultCard('Driver Number (Moolank)', report.driverNumber, null, 100, report.driverLuckyNumbers)}
                ${createResultCard('Conductor Number (Bhagyank)', report.conductorNumber, null, 200, report.conductorLuckyNumbers)}
                ${createResultCard('Zodiac Sign', report.zodiacSign, interpretations.zodiac ? interpretations.zodiac[report.zodiacSign] : null, 300)}
                ${createResultCard('Kua Number', report.kuaNumber, null, 400)}
                ${createResultCard('Soul Urge Number', report.soulUrgeNumber, null, 500)}
                ${createResultCard('Personality Number', report.personalityNumber, null, 600)}
                ${createResultCard('Name Number', report.fullNameNumber, null, 700)}
                <div class="grid md:grid-cols-2 gap-6">
                    ${createResultCard('Karmic Debt', report.karmicDebt, {title: "Indicator", text:"Reflects lessons from past actions that need to be addressed in this lifetime."}, 800)}
                    ${createResultCard('Master Number', report.masterNumber, {title: "Indicator", text:"Signifies a higher potential for achievement and spiritual purpose, but with greater challenges."}, 800)}
                </div>
                <div class="grid md:grid-cols-3 gap-6">
                    ${createResultCard('Personal Year', report.personalYear, {title: "Current Vibe", text:"The theme for your current year from one birthday to the next."}, 900)}
                    ${createResultCard('Universal Year', report.universalYear, {title: "Global Vibe", text:"The collective energy influencing everyone on the planet this year."}, 900)}
                    ${createResultCard('Success Number', report.successNumber, {title: "Achievement Key", text:"A number that aids in achieving your life's goals and ambitions."}, 900)}
                </div>
                ${createLoShuGrid('Lo Shu Grid (Date of Birth)', report.baseGridCounts, 1000)}
                ${createLoShuGrid('Lo Shu Grid (Full Chart)', report.fullGridCounts, 1100, explanation)}
            `;
        }
    </script>
</body>
</html>